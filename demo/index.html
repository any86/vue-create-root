<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="vue.js"></script>
    <script src="../dist/vue-create-root.umd.js"></script>

</head>

<body>
    <main id="app"></main>

    <div id="my"></div>
    <script>
        Vue.use(VueCreateRoot);
        const Com1 = {
            name: 'Texttasd',
            props: {
                text: {
                    type: String,
                    default: '我有text'
                }
            },
            template: `<p>我是静态的Com1, {{text}}</p>`
        }

        const Com = {
            name: 'Color',
            props: {
                color: {
                    type: String,
                    default: '#000'
                },

                value: {
                    type: String,
                    default: '当前'
                },
            },
            data() {
                return {
                    fontSize: '36px'
                };
            },
            template: `<h1 :style="{color, fontSize}" @click="toggle">{{value}}, 颜色: {{color}}<small style="color:#69c;">#69c : <slot>插槽</slot></small></h1>`,
            methods: {
                toggle() {
                    this.fontSize = '36px' === this.fontSize ? '26px' : '36px';
                    this.$emit('toggle', this.fontSize);
                }
            }
        };


        const C = Vue.createRoot(Com1);
        C.init({});

        C.init({});

        new C({
            props: {
                text: 'new 出来的'
            }
        });

        new C({
            props: {
                text: 'new 出来的2'
            }
        });

        let aaa = C.init({
            props: {
                text: '我在后面'
            }
        });

        let d3 = new C({
            props: {
                text: 'new 出来的3'
            }
        });
        aaa.$destroy();

        const B = Vue.createRoot(Com);

        const text = '我是text'
        const color = '#f99';
        const value = '我是value'

        B.init({
            props: {
                value: '我第一',
                color
            },

            on: {
                toggle() {
                    // alert('ttt')
                }
            },

            childrenRender(h) {
                return [h('p', {
                    slot: 'default'
                }, text)]
            }
        });


        B.init({
            props: {
                value: '我第乌克兰是经典款了',
                color: '#aca'
            },
            on: {
                toggle() {
                    // alert('ttt')
                }
            },
            childrenRender(h) {
                return [h('p', {
                    slot: 'default'
                }, text)]
            }
        });

        Vue.prototype.$b = (opt) => B.init({
            props: opt
        });



        // let c = new B(Com, {
        //     props: {
        //         value,
        //         color
        //     },
        //     on: {
        //         toggle() {
        //             // alert('ttt')
        //         }
        //     },
        //     childrenRender(h) {
        //         return [h('p', {
        //             slot: 'default'
        //         }, text)]
        //     }
        // });

        // c.$destroy();
        // console.log(B)



        function onMounted() {
            this.$createRoot(Com, {
                    color: '#f90'
                },
                h => h('p', `children123`), {
                    isAppend: false,
                    target: '#my'
                }
            )
        }

        // console.log('a',a)
        const vm = new Vue({
            el: '#app',

            components: {
                Com
            },

            data() {
                return {
                    msg: '我是独立的vue实例',
                    fontSize: '36px'
                }
            },

            template: `<div :style="{fontSize}" @click="call">{{msg}}: </div>`,

            mounted() {
                onMounted.call(this);

            },

            methods: {
                call() {
                    alert(321)
                },
                destroy() {
                    this.$destroy();
                }
            },

            destroyed() {
                // alert('des')
            },
        });
    </script>
</body>

</html>